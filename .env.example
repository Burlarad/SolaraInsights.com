# ==============================================================================
# SOLARA INSIGHTS - ENVIRONMENT VARIABLES
# ==============================================================================
# Copy this file to .env and fill in your actual values.
# Never commit .env to version control.

# ------------------------------------------------------------------------------
# Core Application URLs
# ------------------------------------------------------------------------------
# NEXT_PUBLIC_SITE_URL: Primary URL for Social OAuth callback construction
# - Must match exactly what's registered in provider portals (Facebook, etc.)
# - Format: https://yourdomain.com (no trailing slash, match www/non-www exactly)
# - Used in: lib/social/oauth.ts, callback routes
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# NEXT_PUBLIC_APP_URL: Used for auth redirects (sign-in, sign-up, Stripe)
# - Falls back to window.location.origin in browser
# - MUST be set in production to avoid internal port exposure
# - Used in: sign-in, sign-up, join, welcome pages, Stripe routes
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Legacy URL vars (for backward compatibility)
APP_URL=http://localhost:3000
NEXTAUTH_URL=http://localhost:3000

# ------------------------------------------------------------------------------
# Supabase Configuration
# ------------------------------------------------------------------------------
# Get these from your Supabase project settings
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key

# Service Role Key (ADMIN ACCESS - bypasses RLS)
# ⚠️ CRITICAL: Never expose this in browser/client code
# Find it: Supabase Dashboard → Settings → API → Service Role Key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_DB_URL=postgresql://postgres:your-password@db.your-project.supabase.co:5432/postgres

# Legacy Vite client keys (optional, for backward compatibility)
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key

# ------------------------------------------------------------------------------
# OpenAI Configuration
# ------------------------------------------------------------------------------
# Get your API key from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-your-openai-api-key
OPENAI_HOROSCOPE_MODEL=gpt-4o-mini
OPENAI_INSIGHTS_MODEL=gpt-4o-mini

# ------------------------------------------------------------------------------
# Stripe Configuration
# ------------------------------------------------------------------------------
# Get these from your Stripe dashboard
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
STRIPE_PRICE_ID=price_your-sanctuary-price-id
STRIPE_FAMILY_PRICE_ID=price_your-family-price-id
STRIPE_PRICING_TABLE_ID=prctbl_your-pricing-table-id

# Legacy Vite Stripe key (optional)
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
VITE_STRIPE_PRICING_TABLE_ID=prctbl_your-pricing-table-id

# ------------------------------------------------------------------------------
# Email Configuration (Resend)
# ------------------------------------------------------------------------------
# Get your API key from https://resend.com
RESEND_API_KEY=re_your-resend-api-key
SOLARA_FROM_EMAIL=solara@yourdomain.com
SOLARA_FROM_NAME="Solara Insights"
RESEND_FROM="Solara Insights <solara@yourdomain.com>"

# ------------------------------------------------------------------------------
# Authentication & OAuth
# ------------------------------------------------------------------------------
# Generate with: openssl rand -base64 32
AUTH_SECRET=your-nextauth-secret

# ------------------------------------------------------------------------------
# Social OAuth Providers (for Social Insights sync)
# ------------------------------------------------------------------------------
# All providers use Authorization Code + PKCE (S256) flow
# Callback URL format: {NEXT_PUBLIC_SITE_URL}/api/social/oauth/{provider}/callback

# Meta (Facebook + Instagram) - Same app for both
# Register at: https://developers.facebook.com/apps
META_APP_ID=your-meta-app-id
META_APP_SECRET=your-meta-app-secret

# TikTok
# Register at: https://developers.tiktok.com/
TIKTOK_CLIENT_KEY=your-tiktok-client-key
TIKTOK_CLIENT_SECRET=your-tiktok-client-secret

# Reddit
# Register at: https://www.reddit.com/prefs/apps
REDDIT_CLIENT_ID=your-reddit-client-id
REDDIT_CLIENT_SECRET=your-reddit-client-secret

# X (Twitter) - Feature-flagged, disabled by default
# Register at: https://developer.twitter.com/
X_CLIENT_ID=your-x-client-id
X_CLIENT_SECRET=your-x-client-secret
X_OAUTH_ENABLED=false

# Token encryption key (AES-256-GCM)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
SOCIAL_TOKEN_ENCRYPTION_KEY=your-base64-encoded-32-byte-key

# ------------------------------------------------------------------------------
# Daily Light Automation
# ------------------------------------------------------------------------------
# Secret for securing cron endpoints
CRON_SECRET=your-random-cron-secret

# ------------------------------------------------------------------------------
# Debug & Development
# ------------------------------------------------------------------------------
NODE_ENV=development
NEXT_PUBLIC_SOLARA_DEBUG=1

# Secret for dev-only API endpoints (not needed in production)
# Generate with: openssl rand -hex 16
DEV_TEST_SECRET=your-dev-test-secret
