# ==============================================================================
# SOLARA INSIGHTS - ENVIRONMENT VARIABLES TEMPLATE
# ==============================================================================
# Copy this file to:
#   - .env.local for local development
#   - .env for production (Render, etc.)
#
# NEVER commit .env or .env.local - they contain secrets!
# ==============================================================================

# ------------------------------------------------------------------------------
# Core Application URLs
# ------------------------------------------------------------------------------
# Primary URL - used for OAuth callbacks and redirects
NEXT_PUBLIC_SITE_URL=https://solarainsights.com

# Legacy URL vars (backward compatibility - set same as SITE_URL)
APP_URL=https://solarainsights.com
NEXT_PUBLIC_APP_URL=https://solarainsights.com
NEXTAUTH_URL=https://solarainsights.com

# ------------------------------------------------------------------------------
# Supabase Configuration
# ------------------------------------------------------------------------------
# Get these from: https://supabase.com/dashboard → Project Settings → API
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# ADMIN ACCESS - bypasses RLS. Never expose client-side!
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Direct DB connection (for migrations/admin tools only)
NEXT_SUPABASE_DB_URL=postgresql://postgres:password@db.your-project.supabase.co:5432/postgres

# ------------------------------------------------------------------------------
# Stripe Configuration
# ------------------------------------------------------------------------------
# Get these from: https://dashboard.stripe.com/apikeys
# Use sk_test_* / pk_test_* for development, sk_live_* / pk_live_* for production

# Server-side keys
STRIPE_SECRET_KEY=sk_live_your_secret_key
STRIPE_PUBLISHABLE_KEY=pk_live_your_publishable_key

# Webhook secret - from Stripe Dashboard → Webhooks
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Price IDs for subscription products (from Products → Pricing)
STRIPE_PRICE_ID=price_individual_plan
STRIPE_FAMILY_PRICE_ID=price_family_plan

# Pricing Table (from Product Catalog → Pricing Tables)
STRIPE_PRICING_TABLE_ID=prctbl_your_table_id

# Client-side keys (required for /join page Stripe embed)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_your_publishable_key
NEXT_PUBLIC_STRIPE_PRICING_TABLE_ID=prctbl_your_table_id

# ------------------------------------------------------------------------------
# OpenAI Configuration
# ------------------------------------------------------------------------------
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-key

# Model configuration (all have sensible defaults if omitted)
# OPENAI_HOROSCOPE_MODEL=gpt-4.1-mini
# OPENAI_DAILY_INSIGHTS_MODEL=gpt-4.1-mini
# OPENAI_YEARLY_INSIGHTS_MODEL=gpt-5.1
# OPENAI_BIRTHCHART_MODEL=gpt-5.1
# OPENAI_PLACEMENTS_MODEL=gpt-5.1
# OPENAI_CONNECTION_BRIEF_MODEL=gpt-4.1-mini
# OPENAI_DEEP_MODEL=gpt-4o
# OPENAI_FAST_MODEL=gpt-4o-mini

# Cost control (optional)
# OPENAI_DAILY_BUDGET_USD=100
# OPENAI_BUDGET_FAIL_MODE=closed

# ------------------------------------------------------------------------------
# Email Configuration (Resend)
# ------------------------------------------------------------------------------
# Get from: https://resend.com/api-keys
RESEND_API_KEY=re_your_resend_key
RESEND_FROM="Solara Insights <solara@solarainsights.com>"
# RESEND_FROM_NAME=Solara Insights

# ------------------------------------------------------------------------------
# Redis/Valkey (Rate Limiting & Caching)
# ------------------------------------------------------------------------------
# For local dev: redis://127.0.0.1:6379
# For Render: use Valkey addon URL
REDIS_URL=redis://your-redis-host:6379

# ------------------------------------------------------------------------------
# Social OAuth Providers
# ------------------------------------------------------------------------------
# All providers use Authorization Code + PKCE (S256) flow
# Callback URL format: {NEXT_PUBLIC_SITE_URL}/api/social/oauth/{provider}/callback

# Meta (Facebook + Instagram) - https://developers.facebook.com/apps
META_APP_ID=your_meta_app_id
META_APP_SECRET=your_meta_app_secret

# TikTok - https://developers.tiktok.com/apps
TIKTOK_CLIENT_KEY=your_tiktok_client_key
TIKTOK_CLIENT_SECRET=your_tiktok_client_secret

# Reddit (not yet configured)
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=

# X/Twitter - DISABLED: Requires X Basic tier ($100/month)
# X Free tier blocks /users/me endpoint needed for authentication
X_CLIENT_ID=your_x_client_id
X_CLIENT_SECRET=your_x_client_secret
X_OAUTH_ENABLED=false
NEXT_PUBLIC_X_OAUTH_ENABLED=false

# Token encryption key (AES-256-GCM) - generate with:
# node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
SOCIAL_TOKEN_ENCRYPTION_KEY=your_32_byte_base64_key

# ------------------------------------------------------------------------------
# Security & Authentication
# ------------------------------------------------------------------------------
# Generate secure random strings with:
# node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
AUTH_SECRET=your_auth_secret
CRON_SECRET=your_cron_secret

# ------------------------------------------------------------------------------
# Debug & Development (LOCAL ONLY - never set in production)
# ------------------------------------------------------------------------------
# NODE_ENV=development
# NEXT_PUBLIC_SOLARA_DEBUG=1
# DEV_PAYWALL_BYPASS=true
# OAUTH_DEBUG_LOGS=true
# DEBUG_MIDDLEWARE=true
# TOKEN_AUDIT_ENABLED=true
